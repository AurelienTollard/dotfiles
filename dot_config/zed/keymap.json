[
    // Window's motions
    {
        "context": "Dock || Terminal || Editor",
        "bindings": {
            "ctrl-h": "workspace::ActivatePaneLeft",
            "ctrl-l": "workspace::ActivatePaneRight",
            "ctrl-k": "workspace::ActivatePaneUp",
            "ctrl-j": "workspace::ActivatePaneDown"
        }
    },
    // File panel (netrw)
    {
        "context": "ProjectPanel && not_editing",
        "bindings": {
            "a": "project_panel::NewFile",
            "A": "project_panel::NewDirectory",
            "r": "project_panel::Rename",
            "d": "project_panel::Delete",
            "x": "project_panel::Cut",
            "c": "project_panel::Copy",
            "p": "project_panel::Paste",
            "q": "workspace::ToggleLeftDock",
            ":": "command_palette::Toggle",
            "%": "project_panel::NewFile",
            "/": "project_panel::NewSearchInDirectory",
            "enter": "project_panel::OpenPermanent",
            "escape": "project_panel::ToggleFocus",
            "h": "project_panel::CollapseSelectedEntry",
            "j": "menu::SelectNext",
            "k": "menu::SelectPrevious",
            "l": "project_panel::ExpandSelectedEntry",
            "o": "project_panel::OpenPermanent",
            "shift-d": "project_panel::Delete",
            "shift-r": "project_panel::Rename",
            "t": "project_panel::OpenPermanent",
            "v": "project_panel::OpenPermanent",
            "shift-g": "menu::SelectLast",
            "g g": "menu::SelectFirst",
            "-": "project_panel::SelectParent",
            "ctrl-6": "pane::AlternateFile"
        }
    },
    {
        "context": "",
        "bindings": {
            "ctrl-b": "workspace::ToggleLeftDock",
            "ctrl-z": "workspace::ToggleZoom",
            "ctrl-t": "workspace::ToggleBottomDock",
            "ctrl-s ctrl-s": "zed::OpenSettingsFile",
            "ctrl-s ctrl-k": "zed::OpenKeymapFile"
        }
    },
    // Selection
    {
        "context": "Editor && vim_mode==visual",
        "bindings": {
            "ctrl-n": "vim::SelectNext",
            "n": "vim::MoveToNext",
            "space a": "editor::SelectAllMatches",
            "s": "vim::PushAddSurrounds",
            "ctrl-j": "editor::MoveLineDown",
            "ctrl-k": "editor::MoveLineUp",
            "shift-,": "editor::Outdent",
            "shift-.": "editor::Indent"
        }
    },
    {
        "context": "Editor && vim_mode==insert",
        "bindings": {
            "j k": "vim::SwitchToNormalMode"
        }
    },
    {
        "context": "Editor && VimControl && !VimWaiting && !menu",
        "bindings": {
            "*": "buffer_search::Deploy",
            "[ d": "editor::GoToPreviousDiagnostic",
            "[ q": "editor::MoveToStartOfExcerpt",
            "] d": "editor::GoToDiagnostic",
            "] q": "editor::MoveToStartOfNextExcerpt",
            "space /": "workspace::NewSearch",
            "space b d": "pane::CloseActiveItem",
            "space b n": "workspace::NewFile",
            "space b q": "pane::CloseOtherItems",
            "space c a": "editor::ToggleCodeActions",
            "space c f": "editor::Format",
            "space f f": "file_finder::Toggle",
            "space f p": "projects::OpenRecent",
            "space f o": "workspace::Open",
            "space f O": "workspace::OpenFiles",
            "space f e": [
                "task::Spawn",
                { "task_name": "explorer", "reveal_target": "center" }
            ],
            "space f y": [
                "task::Spawn",
                { "task_name": "yazi", "reveal_target": "center" }
            ],
            "space q q": "zed::Quit",
            "space s W": "pane::DeploySearch",
            "space s d": "diagnostics::Deploy",
            "space s f": "file_finder::Toggle",
            "space s r": "project_symbols::Toggle",
            "space s s": "outline::Toggle",
            "space s w": "buffer_search::Deploy",
            "space space": "file_finder::Toggle",
            "space T": "workspace::NewCenterTerminal",
            "space t": "workspace::ToggleBottomDock",
            "space u i": "editor::ToggleInlayHints",
            "space u w": "editor::ToggleSoftWrap",
            "space z": "workspace::ToggleCenteredLayout",

            // AI
            "space a c": "agent::ToggleFocus",
            "space a i": "assistant::InlineAssist",

            // LSP
            "space l d": "editor::GoToDefinition",
            "space l D": "editor::GoToDefinitionSplit",
            "space l r": "editor::FindAllReferences",
            "space l i": "editor::GoToImplementation",
            "space l I": "editor::GoToImplementationSplit",
            "space l R": "editor::Rename",

            // Git
            "space g g": [
                "task::Spawn",
                {
                    "task_name": "lazygit",
                    "reveal_target": "center"
                }
            ],
            "space g h d": "editor::ExpandAllDiffHunks",
            "space g h D": "git::Diff",
            "space g h r": "git::Restore",
            "space g h R": "git::RestoreFile",
            "space g h b": "git::Blame",
            "space g h c": "git::CheckoutBranch",

            // Markdown
            "space m p": "markdown::OpenPreview",
            "space m P": "markdown::OpenPreviewToTheSide",

            // Harpoon like?
            "space 1": ["pane::ActivateItem", 0],
            "space 2": ["pane::ActivateItem", 1],
            "space 3": ["pane::ActivateItem", 2],
            "space 4": ["pane::ActivateItem", 3],
            "space 5": ["pane::ActivateItem", 4],
            "space 6": ["pane::ActivateItem", 5],
            "space 7": ["pane::ActivateItem", 6],
            "space 8": ["pane::ActivateItem", 7],
            "space 9": ["pane::ActivateItem", 8],
            "space 0": "pane::ActivateLastItem",
            "] b": "pane::ActivateNextItem",
            "[ b": "pane::ActivatePreviousItem",
            "space ,": "tab_switcher::Toggle",

            // Hunks?
            "] h": "editor::GoToHunk",
            "[ h": "editor::GoToPreviousHunk",
            "] c": "editor::GoToHunk",
            "[ c": "editor::GoToPreviousHunk"
        }
    },
    // Resize
    {
        "context": "(Editor ||  ProjectPanel) && vim_mode != insert && !VimWaiting && !editing",
        "bindings": {
            "ctrl-shift-right": "vim::ResizePaneRight",
            "ctrl-right": [
                "workspace::SendKeystrokes",
                "ctrl-shift-right ctrl-shift-right ctrl-shift-right ctrl-shift-right"
            ],
            "ctrl-shift-left": "vim::ResizePaneLeft",
            "ctrl-left": [
                "workspace::SendKeystrokes",
                "ctrl-shift-left ctrl-shift-left ctrl-shift-left ctrl-shift-left"
            ],
            "ctrl-shift-up": "vim::ResizePaneUp",
            "ctrl-up": [
                "workspace::SendKeystrokes",
                "ctrl-shift-up ctrl-shift-up ctrl-shift-up ctrl-shift-up"
            ],
            "ctrl-shift-down": "vim::ResizePaneDown",
            "ctrl-down": [
                "workspace::SendKeystrokes",
                "ctrl-shift-down ctrl-shift-down ctrl-shift-down ctrl-shift-down"
            ]
        }
    },
    // Terminal QOL
    {
        "context": "Terminal",
        "bindings": {
            "ctrl-n": "workspace::NewTerminal",
            "ctrl-x": "pane::CloseActiveItem"
        }
    },
    // AI QOL
    {
        "context": "(AgentPanel || AgentPanel > Editor) && vim_mode != insert",
        "bindings": {
            "ctrl-n": "agent::NewThread",
            "ctrl-x": "workspace::ToggleRightDock",
            "space a c": [
                "agent::NewExternalAgentThread",
                { "agent": "claude_code" }
            ],
            "space a g": [
                "agent::NewExternalAgentThread",
                { "agent": "gemini" }
            ],
            "space a o": [
                "agent::NewExternalAgentThread",
                { "agent": "codex" }
            ],
            "space m p": "agent::OpenActiveThreadAsMarkdown",
            "space h": "agent::OpenHistory",
            "/": "agent::ToggleModelSelector"
        }
    }
]

